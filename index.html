<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Display a map on a webpage</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">

<link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>

<style>
body { margin: 0; padding: 0; }
#map { position: absolute; top: 0; bottom: 0; width: 100%; }

.map_panel{
  position:absolute;
  top:10px;
  left:10px;

  background:#ffffff;
  padding:10px;

  border-radius:6px;

  font-family:sans-serif;
  font-size:13px;

  box-shadow:0 1px 4px #838383;

  z-index:2;
}
.panel_title{
  font-weight:600;
  margin-bottom:6px;
}

.basemap_option{
  display:block;
  margin:4px 0;
  cursor:pointer;
}
.map_btn {
  width: 32px;
  height: 32px;

  background: #ffffff;
  color: #1e293b;

  border: 1px solid #e2e8f0;
  border-radius: 6px;

  font-size: 18px;
  font-weight: 600;
  line-height: 1;

  display: flex;
  align-items: center;
  justify-content: center;

  cursor: pointer;

  box-shadow: 0 1px 2px #838383;

  transition: background 0.15s ease,
              box-shadow 0.15s ease,
              transform 0.1s ease;
}

.map_btn:hover {
  background: #f8fafc;
  box-shadow: 0 2px 4px #838383;
  transform: translateY(-1px);
}

.map_btn:active {
  background: #f1f5f9;
  transform: translateY(0);
  box-shadow: 0 1px 1px #838383;
}

.map_controls {
  position: absolute;
  top: 180px;
  left: 10px;

  display: flex;
  flex-direction: column;
  gap: 6px;

  background: rgba(255, 255, 255, 0.95);
  padding: 6px;

  border-radius: 8px;

  box-shadow: 0 1px 4px #838383;

  z-index: 2;
}
.map_btn:hover {
  background: #f8fafc;
  box-shadow: 0 2px 6px #838383;
  transform: translateY(-1px);
}

.map_btn:active {
  background: #f1f5f9;
  transform: translateY(0);
  box-shadow: 0 1px 2px #838383;
}
#legend_panel{
  position:absolute;
  left:10px;
  top:280px;

  background:#ffffff;
  padding:10px;

  border-radius:8px;

  font-family:sans-serif;
  font-size:13px;

  box-shadow:0 1px 4px #838383;

  max-width:260px;

  z-index:2;
}

.legend_title{
  font-weight:600;
  margin-bottom:8px;
}

.legend_item{
  display:flex;
  align-items:center;
  gap:8px;
  margin:6px 0;
}

.legend_swatch{
  width:18px;
  height:18px;
  border:1px solid #838383;
  box-sizing:border-box;
}

.legend_line_stairways{
  width:18px;
  height:0;
  border:none;
  border-top:4px solid #e5b636;
  border-radius:1px;
}

.legend_fill_flood{
  background: #b6653f; 
}
</style>
</head>

<body>

<div id="map"></div>

<div id="basemap_switcher" class="map_panel" role="group" aria-label="Basemap switcher">
  <div class="panel_title">Basemap</div>

  <label class="basemap_option">
    <input type="radio" name="basemap" value="mapbox_light" checked>
    Mapbox Light
  </label>

  <label class="basemap_option">
    <input type="radio" name="basemap" value="basemap_dark">
    Modified Tiles
  </label>

  <label class="basemap_option">
    <input type="radio" name="basemap" value="basemap_stairways">
    Stairways Tiles
  </label>

  <label class="basemap_option">
    <input type="radio" name="basemap" value="basemap_composite">
    Composite Tiles
  </label>

  <label class="basemap_option">
    <input type="radio" name="basemap" value="basemap_flood">
    Flood Tiles
  </label>
</div>

<div class="map_controls" role="toolbar" aria-label="Map controls">
    <button id="btnZoomIn" class="map_btn" aria-label="Zoom in">+</button>
    <button id="btnZoomOut" class="map_btn" aria-label="Zoom out">âˆ’</button>
</div>

<div id="legend_panel" aria-label="Map legend">
  <div class="legend_title">Legend</div>
  <div class="legend_item">
    <span class="legend_swatch legend_line_stairways"></span>
    <span class="legend_label">
      Stairways maintained by Seattle Department of Transportation
    </span>
  </div>

  <div class="legend_item">
    <span class="legend_swatch legend_fill_flood"></span>
    <span class="legend_label">
      Flood prone areas with 100 foot buffer
    </span>
  </div>
</div>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoibXJpY2hlcnQiLCJhIjoiY21oNTl4NnlxMDVqdTJqb205aDFmcWU2ZSJ9.0TGc-97aSBJ8xmNjTjjbuw';

const map = new mapboxgl.Map({
  container: 'map',
  style: 'mapbox://styles/mapbox/light-v11',
  center: [-122.3, 47.608],
  zoom: 11.3
});

map.on('load', () => {
  // raster tile sources
  map.addSource('dark_tiles', {
    type: 'raster',
    tiles: ['assets/dark green basemap/{z}/{x}/{y}.png'],
    tileSize: 256,
    attribution: 'Map tiles designed by Mimi Richert'
  });

  map.addSource('stairways_tiles', {
    type: 'raster',
    tiles: ['assets/stairways/{z}/{x}/{y}.png'],
    tileSize: 256,
    attribution: 'Map tiles designed by Mimi Richert'
  });

  map.addSource('composite_tiles', {
    type: 'raster',
    tiles: ['assets/basemap with stairways/{z}/{x}/{y}.png'],
    tileSize: 256,
    attribution: 'Map tiles designed by Mimi Richert'
  });

  map.addSource('flood_tiles', {
    type: 'raster',
    tiles: ['assets/flood/{z}/{x}/{y}.png'],
    tileSize: 256,
    attribution: 'Map tiles designed by Mimi Richert'
  });

  // add raster layers, initially invisible
  map.addLayer({
    id: 'basemap_dark',
    type: 'raster',
    source: 'dark_tiles',
    layout: { visibility: 'none' }
  });

  map.addLayer({
    id: 'basemap_stairways',
    type: 'raster',
    source: 'stairways_tiles',
    layout: { visibility: 'none' }
  });

  map.addLayer({
    id: 'basemap_composite',
    type: 'raster',
    source: 'composite_tiles',
    layout: { visibility: 'none' }
  });

  map.addLayer({
    id: 'basemap_flood',
    type: 'raster',
    source: 'flood_tiles',
    layout: { visibility: 'none' }
  });



  const raster_basemaps = ['basemap_dark', 'basemap_stairways', 'basemap_composite', 'basemap_flood'];

  function setBasemap(selected) {
    raster_basemaps.forEach(id => {
      if (map.getLayer(id)) map.setLayoutProperty(id, 'visibility', 'none');
    });

    if (selected !== 'mapbox_light' && map.getLayer(selected)) {
      map.setLayoutProperty(selected, 'visibility', 'visible');
    }
  }

  const basemap_radios = document.querySelectorAll('input[name="basemap"]');

  basemap_radios.forEach(radio => {
    radio.addEventListener('change', (e) => {
      setBasemap(e.target.value);
    });
  });

  setBasemap('mapbox_light');


  // Zoom buttons
  const btnZoomIn = document.getElementById('btnZoomIn');
  const btnZoomOut = document.getElementById('btnZoomOut');
  if (btnZoomIn) btnZoomIn.addEventListener('click', () => map.zoomIn());
  if (btnZoomOut) btnZoomOut.addEventListener('click', () => map.zoomOut());
});

</script>

</body>
</html>
